var R=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var z=Object.prototype.hasOwnProperty;var V=(d,t)=>{for(var n in t)R(d,n,{get:t[n],enumerable:!0})},F=(d,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of U(t))!z.call(d,e)&&e!==n&&R(d,e,{get:()=>t[e],enumerable:!(s=H(t,e))||s.enumerable});return d};var j=d=>F(R({},"__esModule",{value:!0}),d);var X={};V(X,{BrowserHistory:()=>L,ChainElement:()=>_,ChainPageRouter:()=>w,ChainRuntime:()=>S,EventDelegator:()=>b,HistoryController:()=>N,OperationStream:()=>m,OperationType:()=>o,ServerHistory:()=>O,createComponent:()=>P,createRouter:()=>x,createState:()=>C,default:()=>J,generateId:()=>T,h:()=>M,map:()=>B,mount:()=>v,renderToStream:()=>D,valueToString:()=>g});module.exports=j(X);function g(d){if(d===null)return"null";if(d===void 0)return"undefined";if(typeof d=="object")try{return JSON.stringify(d)}catch{return String(d)}return String(d)}var o={CREATE_ELEMENT:"CREATE_ELEMENT",CREATE_TEXT_NODE:"CREATE_TEXT_NODE",SET_TEXT_CONTENT:"SET_TEXT_CONTENT",APPEND_CHILD:"APPEND_CHILD",REMOVE_CHILD:"REMOVE_CHILD",INSERT_BEFORE:"INSERT_BEFORE",SET_ATTRIBUTE:"SET_ATTRIBUTE",REMOVE_ATTRIBUTE:"REMOVE_ATTRIBUTE",SET_STYLE:"SET_STYLE",ADD_CLASS:"ADD_CLASS",REMOVE_CLASS:"REMOVE_CLASS",ADD_EVENT_LISTENER:"ADD_EVENT_LISTENER",MOUNT:"MOUNT",BIND_STATE:"BIND_STATE",BIND_ATTRIBUTE:"BIND_ATTRIBUTE",BIND_LIST:"BIND_LIST",UPDATE_NODE:"UPDATE_NODE",ROUTE_CHANGE:"ROUTE_CHANGE",ROUTE_MATCH:"ROUTE_MATCH",INIT_ROUTER:"INIT_ROUTER"},$=0,T=d=>`${d}-${$++}`;function C(d){let t=d,n=new Set;return{get value(){return t},set value(e){Object.is(t,e)||(t=e,n.forEach(i=>i(t)))},update(e){this.value=typeof e=="function"?e(this.value):e},subscribe(e){return n.add(e),e(t),()=>n.delete(e)},toString(){return g(t)},map(e){let i=C(e(t));return this.subscribe(a=>{i.update(e(a))}),i.isMapped=!0,i}}}var m=class d{constructor(){this.operations=[]}add(t){let n=this.operations[this.operations.length-1];if(n&&t.nodeId===n.nodeId&&t.type===o.SET_ATTRIBUTE&&n.type===o.SET_ATTRIBUTE&&t.name===n.name){n.value=t.value;return}if(n&&t.nodeId===n.nodeId&&t.type===o.SET_STYLE&&n.type===o.SET_STYLE&&t.property===n.property){n.value=t.value;return}this.operations.push(t)}getOperations(){return this.operations}clear(){this.operations=[]}serialize(){let t=this.operations.map(n=>{if(n.type===o.ADD_EVENT_LISTENER){let{handler:s,...e}=n;return e}return n});return JSON.stringify(t)}static deserialize(t){let n=new d;return n.operations=JSON.parse(t),n}},_=class d{constructor(t){this.nodeId=T("node"),this.stream=new m,this.children=[],this.eventHandlers=[],t&&(this.tagName=t,this.stream.add({type:o.CREATE_ELEMENT,nodeId:this.nodeId,tagName:t}))}_bind(t,n){if(t&&typeof t.subscribe=="function"){let s=T("state");n(t.value,this.stream),this.stream.add({type:o.BIND_STATE,nodeId:this.nodeId,stateId:s,updateFn:n,state:t})}else n(t,this.stream);return this}set(t,n,s){if(typeof t=="object"&&t!==null&&arguments.length===1){let e=t;return e.attr&&Object.entries(e.attr).forEach(([i,a])=>{this.set(i,a,"attr")}),e.style&&Object.entries(e.style).forEach(([i,a])=>{this.set(i,a,"style")}),e.class!==void 0&&(typeof e.class=="string"?this.set(e.class,!0,"class"):Array.isArray(e.class)?e.class.forEach(i=>{this.set(i,!0,"class")}):typeof e.class=="object"&&e.class!==null&&Object.entries(e.class).forEach(([i,a])=>{this.set(i,a,"class")})),this}if(typeof t=="string"){s||(t.startsWith("data-")||t.includes("-")?s="attr":t in document.documentElement.style?s="style":s="attr");let e=this.nodeId;switch(s){case"style":return this._bind(n,function(i,a){a.add({type:o.SET_STYLE,nodeId:e,property:t,value:i})});case"class":return n===null||n===!1?this.stream.add({type:o.REMOVE_CLASS,nodeId:e,className:t}):t.split(" ").filter(Boolean).forEach(i=>{this.stream.add({type:o.ADD_CLASS,nodeId:e,className:i})}),this;case"attr":default:if(n&&typeof n.subscribe=="function"&&!n.isMapped){let i=g(n.value);return this.stream.add({type:o.SET_ATTRIBUTE,nodeId:e,name:t,value:i}),this.stream.add({type:o.BIND_ATTRIBUTE,nodeId:this.nodeId,name:t,state:n,stateId:T("attr_state")}),this}return n==null?(this.stream.add({type:o.REMOVE_ATTRIBUTE,nodeId:e,name:t}),this):this._bind(n,function(i,a){let r=g(i);a.add({type:o.SET_ATTRIBUTE,nodeId:e,name:t,value:r})})}}return this}on(t,n){let s=T("action");return this.stream.add({type:o.ADD_EVENT_LISTENER,nodeId:this.nodeId,eventType:t,actionId:s}),this.eventHandlers.push({actionId:s,handler:n}),this}child(...t){return t.flat().forEach(n=>{if(n instanceof d)this.children.push(n),this.stream.operations.push(...n.stream.getOperations()),this.stream.add({type:o.APPEND_CHILD,parentId:this.nodeId,childId:n.nodeId}),this.eventHandlers.push(...n.eventHandlers);else if(typeof n=="string"||typeof n=="number"||n&&typeof n.subscribe=="function"){let s=T("text"),e=n&&typeof n.subscribe=="function"?n.value:n,i=g(e);this.stream.add({type:o.CREATE_TEXT_NODE,nodeId:s,content:i}),this.stream.add({type:o.APPEND_CHILD,parentId:this.nodeId,childId:s}),n&&typeof n.subscribe=="function"&&this.stream.add({type:o.BIND_STATE,nodeId:this.nodeId,stateId:T("state"),updateFn:function(a,r){r.add({type:o.SET_TEXT_CONTENT,nodeId:s,content:g(a)})},state:n})}}),this}mount(t){this.stream.add({type:o.MOUNT,nodeId:this.nodeId,selector:t})}when(t,n,s,e={}){let{keepAlive:i=!1}=e;if(i){let a=n(),r=s?s():null;a&&(a.style("display",t.map(c=>c?"block":"none")),this.child(a)),r&&(r.style("display",t.map(c=>c?"none":"block")),this.child(r))}else{let a=new d("div").set("data-chain-placeholder","true","attr");this.child(a);let r=function(c){let h=this.nodeMap.get(a.nodeId);if(!h)return;let E=h.dataset.childNodeId;if(E){let l=this.nodeMap.get(E);l&&h.contains(l)&&h.removeChild(l),delete h.dataset.childNodeId}let u=c?n:s;if(u){let l=u(c);if(l){this.execute(l.stream.getOperations(),!0);let p=this.nodeMap.get(l.nodeId);p&&(h.appendChild(p),h.dataset.childNodeId=l.nodeId,l.stream.getOperations().filter(f=>f.type===o.BIND_STATE||f.type===o.BIND_LIST).forEach(f=>this.applyOperation(f)),(p instanceof HTMLInputElement||p instanceof HTMLTextAreaElement)&&setTimeout(()=>p.focus(),10))}}};this.stream.add({type:o.BIND_STATE,nodeId:a.nodeId,stateId:T("when"),updateFn:r,state:t})}return this}},S=class{constructor(){this.nodeMap=new Map,this.stateSubscriptions=new Map,this.eventDelegator=new b(this),this.batchQueue=[],this.isBatchingScheduled=!1,this.animationFrameId=null}execute(t,n=!1){n?t.forEach(s=>this.applyOperation(s)):(this.batchQueue.push(...t),this.scheduleBatchExecution())}scheduleBatchExecution(){this.isBatchingScheduled||(this.isBatchingScheduled=!0,this.animationFrameId=requestAnimationFrame(()=>{let t=this.batchQueue;this.batchQueue=[],t.forEach(n=>this.applyOperation(n)),this.isBatchingScheduled=!1,this.animationFrameId=null}))}applyOperation(t){let s={[o.CREATE_ELEMENT]:()=>{let e=document.createElement(t.tagName);e.dataset.chainId=t.nodeId,this.nodeMap.set(t.nodeId,e)},[o.CREATE_TEXT_NODE]:()=>this.nodeMap.set(t.nodeId,document.createTextNode(t.content)),[o.SET_TEXT_CONTENT]:()=>{let e=this.nodeMap.get(t.nodeId);e&&(e.textContent=t.content)},[o.APPEND_CHILD]:()=>{let e=this.nodeMap.get(t.parentId),i=this.nodeMap.get(t.childId);e&&i&&e.appendChild(i)},[o.SET_ATTRIBUTE]:()=>{let e=this.nodeMap.get(t.nodeId);e&&(t.name==="value"&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)?e.value=t.value:t.name==="disabled"&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLButtonElement)?e.disabled=t.value:e.setAttribute(t.name,t.value))},[o.SET_STYLE]:()=>{let e=this.nodeMap.get(t.nodeId);e&&(e.style[t.property]=t.value)},[o.ADD_CLASS]:()=>{let e=this.nodeMap.get(t.nodeId);e&&e.classList.add(t.className)},[o.REMOVE_CLASS]:()=>{let e=this.nodeMap.get(t.nodeId);e&&e.classList.remove(t.className)},[o.ADD_EVENT_LISTENER]:()=>{let e=this.nodeMap.get(t.nodeId);e&&(e.setAttribute("data-chain-action",t.actionId),this.eventDelegator.delegate(t.eventType))},[o.BIND_STATE]:()=>{if(t.state&&typeof t.state.subscribe=="function"){let e=this,i=t.state.subscribe(a=>{if(t.updateFn.length===2){let r=new m;t.updateFn.call(e,a,r),e.execute(r.getOperations())}else t.updateFn.call(e,a)});this.stateSubscriptions.set(t.stateId,i)}},[o.BIND_ATTRIBUTE]:()=>{let e=this.nodeMap.get(t.nodeId);if(e&&t.state&&typeof t.state.subscribe=="function"){let i=t.state.subscribe(a=>{t.name==="disabled"&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLButtonElement)?e.disabled=!!a:e.setAttribute(t.name,g(a))});this.stateSubscriptions.set(t.stateId,i)}},[o.BIND_LIST]:()=>{if(t.state&&typeof t.state.subscribe=="function"){let e=t.state.subscribe(i=>{this.reconcileList(t.nodeId,i,t.factory)});this.stateSubscriptions.set(T("sub"),e)}},[o.MOUNT]:()=>{let e=document.querySelector(t.selector),i=this.nodeMap.get(t.nodeId);e&&i&&(e.innerHTML="",e.appendChild(i))},[o.INSERT_BEFORE]:()=>{let e=this.nodeMap.get(t.parentId),i=this.nodeMap.get(t.childId),a=this.nodeMap.get(t.anchorId);e&&i&&a&&e.insertBefore(i,a)},[o.REMOVE_CHILD]:()=>{let e=this.nodeMap.get(t.parentId),i=this.nodeMap.get(t.childId);e&&i&&(this.cleanupNodeTree(i),e.removeChild(i))},[o.ROUTE_CHANGE]:()=>{console.log("Route change operation:",t)},[o.ROUTE_MATCH]:()=>{console.log("Route match operation:",t)},[o.INIT_ROUTER]:()=>{let e=this.nodeMap.get(t.nodeId);e&&t.router&&t.router.init(e)}}[t.type];s&&s()}cleanupNodeTree(t){if(!t)return;this.eventDelegator.clearHandlersForNode(t),(typeof t.querySelectorAll=="function"?[t,...t.querySelectorAll("[data-chain-id]")]:[]).forEach(s=>{s.dataset&&s.dataset.chainId&&this.nodeMap.delete(s.dataset.chainId)})}reconcileList(t,n,s){let e=this.nodeMap.get(t);if(!e)return;let i=Array.from(e.childNodes),a=new Map;for(let c of i){let h=c;h.dataset&&h.dataset.key&&a.set(h.dataset.key,c)}let r=[];for(let c=0;c<n.length;c++){let h=n[c],E=c,u=String(h.id??E),l=a.get(u);if(l)a.delete(u);else{let p=s(h,E).set("data-key",u,"attr");this.execute(p.stream.getOperations(),!0),l=this.nodeMap.get(p.nodeId),this.eventDelegator.registerHandlers(p.eventHandlers),p.stream.getOperations().filter(f=>f.type===o.BIND_STATE||f.type===o.BIND_LIST).forEach(f=>this.applyOperation(f))}r.push(l)}for(let c of a.values())this.cleanupNodeTree(c),e.removeChild(c);for(let c=0;c<r.length;c++){let h=r[c];e.childNodes[c]!==h&&e.insertBefore(h,e.childNodes[c]||null)}}destroy(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.batchQueue=[],this.isBatchingScheduled=!1,this.eventDelegator.destroy(),this.stateSubscriptions.forEach(t=>t()),this.nodeMap.clear(),this.stateSubscriptions.clear()}},b=class{constructor(t){this.runtime=t,this.delegatedEvents=new Set,this.handlerMap=new Map}registerHandlers(t){t.forEach(({actionId:n,handler:s})=>{this.handlerMap.set(n,s)})}clearHandlersForNode(t){if(!t||typeof t.querySelectorAll!="function")return;[t,...t.querySelectorAll("[data-chain-action]")].forEach(s=>{if(s.hasAttribute&&s.hasAttribute("data-chain-action")){let e=s.getAttribute("data-chain-action");e&&this.handlerMap.delete(e)}})}delegate(t){this.delegatedEvents.has(t)||(document.body.addEventListener(t,this.handleEvent.bind(this),!0),this.delegatedEvents.add(t))}handleEvent(t){let n=t.target;for(;n&&n!==document.body;){let s=n.getAttribute("data-chain-action");if(s&&this.handlerMap.has(s)){this.handlerMap.get(s)(t);return}n=n.parentElement}}destroy(){this.delegatedEvents.clear(),this.handlerMap.clear()}};function M(d){return new _(d)}function v(d,t,n={}){let s=new S;if(s.eventDelegator.registerHandlers(d.eventHandlers),n.state){let a=new Map(Object.entries(n.state));d.stream.getOperations().filter(r=>r.type===o.BIND_STATE).forEach(r=>{a.has(r.stateId)&&(r.state.value=a.get(r.stateId))})}if(n.stream){let a=m.deserialize(n.stream);s.execute(a.getOperations(),!0)}else s.execute(d.stream.getOperations(),!0);let e=s.nodeMap.get(d.nodeId),i=typeof t=="string"?document.querySelector(t):t;return i&&e&&(i.innerHTML="",i.appendChild(e)),d.stream.getOperations().filter(a=>a.type===o.BIND_STATE||a.type===o.BIND_LIST).forEach(a=>s.applyOperation(a)),s}function D(d){let t=d(),{stream:n}=t,s={},e=null;return n.getOperations().forEach(a=>{a.type===o.BIND_STATE&&(s[a.stateId]=a.state.value),a.type===o.CREATE_ELEMENT&&!e&&(e=a.nodeId)}),{stream:n.serialize(),state:s,rootId:e}}function B(d,t){let n=new _("div");return n.stream.add({type:o.BIND_LIST,nodeId:n.nodeId,state:d,factory:t}),n}function P(d,t){return(...n)=>{let s=t(...n);return s.set("data-component",d,"attr"),s}}var N=class{constructor(){this.listeners=new Set}listen(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notify(t){this.listeners.forEach(n=>n(t))}navigate(t,n,s){throw new Error("Not implemented")}getLocation(){throw new Error("Not implemented")}goBack(){throw new Error("Not implemented")}},L=class extends N{constructor(){super(),typeof window<"u"&&window.addEventListener("popstate",t=>{this.notify({path:window.location.pathname+window.location.search,state:t.state})})}navigate(t,n={},s=!1){if(typeof window>"u"||window.location.pathname+window.location.search===t)return;let i=s?"replaceState":"pushState";window.history[i](n,"",t),this.notify({path:t,state:n})}getLocation(){return typeof window>"u"?{path:"/",state:{}}:{path:window.location.pathname+window.location.search,state:window.history.state||{}}}goBack(){typeof window<"u"&&window.history.back()}},O=class extends N{constructor(t="/"){super(),this.stack=[{path:t,state:{}}],this.index=0}navigate(t,n={},s=!1){s?this.stack[this.index]={path:t,state:n}:(this.stack=this.stack.slice(0,this.index+1),this.stack.push({path:t,state:n}),this.index++),this.notify(this.stack[this.index])}getLocation(){return this.stack[this.index]}goBack(){this.index>0&&(this.index--,this.notify(this.stack[this.index]))}},w=class{constructor(t={}){this.pages=new Map,this.currentPage=C({id:null,params:{}}),this._runtimeCache=new WeakMap,this.history=t.history||(typeof window<"u"?new L:new O(t.initialPath)),this.normalizePath=t.normalizePath||(n=>n),this._initEventDelegation()}init(t){this.root=t,this.root.dataset.chainRouter="root";let n={id:null,factory:null};this.currentPage.subscribe(({id:s,params:e})=>{if(n.id&&n.factory){let i=this.pages.get(n.id),a=this._runtimeCache.get(n.factory);if(a&&a.runtime){let r=a.runtime.nodeMap.get(a.runtime.rootNodeId);i&&!i.options.keepAlive?(r&&r.parentNode===this.root&&this.root.removeChild(r),a.runtime.destroy(),this._runtimeCache.delete(n.factory)):r&&(r.hidden=!0)}}if(!s){this._renderBlank(),n={id:null,factory:null};return}if(this.pages.has(s)){let{factory:i,options:a={}}=this.pages.get(s),r=this._runtimeCache.get(i),c=r?JSON.stringify(r.params)!==JSON.stringify(e):!0;if(r&&a.keepAlive&&c){let h=r.runtime.nodeMap.get(r.runtime.rootNodeId);h&&h.parentNode===this.root&&this.root.removeChild(h),r.runtime.destroy(),this._runtimeCache.delete(i),r=null}if(r){let h=r.runtime.nodeMap.get(r.runtime.rootNodeId);h&&(h.hidden=!1)}else{let h=i(e),E=new S;E.rootNodeId=h.nodeId,E.eventDelegator.registerHandlers(h.eventHandlers),E.execute(h.stream.getOperations(),!0);let u=E.nodeMap.get(h.nodeId);this.root&&u&&this.root.appendChild(u),h.stream.getOperations().filter(l=>l.type===o.BIND_STATE||l.type===o.BIND_LIST).forEach(l=>E.applyOperation(l)),this._runtimeCache.set(i,{runtime:E,params:e})}n={id:s,factory:i}}else console.error(`Page not registered: ${s}`),this._renderFallback(),n={id:null,factory:null}}),this.history.listen(s=>this._handleLocationChange(s)),this._handleLocationChange(this.history.getLocation())}register(t,n,s={}){if(this.pages.has(t)){console.warn(`Route already registered: ${t}`);return}let e=[],i=t.replace(/:(\w+)/g,(a,r)=>(e.push(r),"([^/]+)"));return this.pages.set(t,{factory:n,options:{keepAlive:!1,...s},regex:new RegExp(`^${i}$`),paramNames:e}),this}navigate(t,n={},s=!1){let{route:e,resolvedParams:i}=this._matchRoute(t);if(!e){if(this.pages.has(t)){let u=this.pages.get(t);this.currentPage.value={id:t,params:n};return}throw new Error(`Unknown route: ${t}`)}let a={...i,...n},r=e.path,c=this.currentPage.value;if(c.id===r&&JSON.stringify(c.params)===JSON.stringify(a))return this;if(e.options.beforeEnter&&!e.options.beforeEnter(a,c))return this;if(c.id&&this.pages.has(c.id)){let u=this.pages.get(c.id);u.options.onLeave&&u.options.onLeave(c.params,{id:r,params:a})}let h=t;if(Object.keys(n).length>0){let u=new URLSearchParams(n);h+=`?${u.toString()}`}this.history.navigate(h,{pageId:r,params:a},s);let E=new CustomEvent("chain:pagenavigate",{detail:{pageId:r,params:n}});return typeof document<"u"&&document.dispatchEvent(E),this}goBack(){this.history.goBack()}closePage(t){let n=this.pages.get(t);if(!n)return;let s=this._runtimeCache.get(n.factory);s&&(s.destroy(),this._runtimeCache.delete(n.factory)),this.pageStack=this.pageStack.filter(e=>e!==t)}getCurrentPage(){return this.currentPage.value}_initEventDelegation(){typeof document<"u"&&document.addEventListener("click",t=>{let n=t.target.closest("[data-chain-route]");if(n){t.preventDefault();let s=n.getAttribute("href");this.navigate(s)}}),document.addEventListener("chain:backpress",()=>this.goBack())}_matchRoute(t){let[n]=t.split("?");for(let[s,e]of this.pages.entries()){let i=n.match(e.regex);if(i){let a={};return e.paramNames.forEach((r,c)=>{a[r]=i[c+1]}),{route:e,resolvedParams:a,path:s}}}return{route:null,resolvedParams:null,path:null}}_handleLocationChange(t){if(!t||!t.path)return;let n=this.normalizePath(t.path),{route:s,resolvedParams:e,path:i}=this._matchRoute(n);if(s){let a=new URLSearchParams(t.path.split("?")[1]||""),r=Object.fromEntries(a.entries()),c={...e,...r},h=this.currentPage.value;if(h.id===i&&JSON.stringify(h.params)===JSON.stringify(c))return;this.currentPage.value={id:i,params:c}}else console.warn(`No route registered for path: ${t.path}. Navigating to root path '/'.`),this.navigate("/",{},!0)}_renderBlank(){this.root.firstChild&&(this.root.innerHTML="")}_renderFallback(){this._renderBlank(),this.root.innerHTML="<div>404 - Page not found</div>"}_closePage(t){this.closePage(t);let n=new CustomEvent("chain:pageclose",{detail:{pageId:t}});document.dispatchEvent(n)}};function x(d={}){let{routes:t=[],history:n,normalizePath:s,basePath:e=""}=d,a=s||(u=>{let l=u;return e&&l.startsWith(e)&&(l=l.substring(e.length)),l===""||l==="/"||l==="/index.html"?"/":(l.startsWith("/")||(l="/"+l),l)}),r=new w({history:n,normalizePath:a});t.forEach(u=>{u.path&&u.component&&r.register(u.path,u.component,u.options)});let c=M("div").set("data-chain-router-view",!0);c.stream.add({type:o.INIT_ROUTER,nodeId:c.nodeId,router:r});function h(u,l,...p){let f=u,I={...l};if(l)for(let[y,k]of Object.entries(l))f.includes(`:${y}`)&&(f=f.replace(`:${y}`,encodeURIComponent(k)),delete I[y]);let A=new URLSearchParams(I).toString();return A&&(f+=`?${A}`),M("a").set("href",f).set("data-chain-route",u).child(...p)}return{router:r,Link:({to:u,params:l,...p},...f)=>{let I=h(u,l,...f);return p&&Object.entries(p).forEach(([A,y])=>{I.set(A,y)}),I},PageView:c}}var q={h:M,createState:C,createComponent:P,map:B,createRouter:x,mount:v,renderToStream:D},J=q;
/**
 * @license MIT

 * Copyright (c) 2025-present

 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy

 * of this software and associated documentation files (the "Software"), to deal

 * in the Software without restriction, including without limitation the rights

 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell

 * copies of the Software, and to permit persons to whom the Software is

 * furnished to do so, subject to the following conditions:

 *
 * The above copyright notice and this permission notice shall be included in all

 * copies or substantial portions of the Software.

 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR

 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,

 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE

 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER

 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,

 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

 * SOFTWARE.

 */
